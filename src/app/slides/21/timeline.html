<div class='timeline-container'>
	<div class='timeline'>
		<div class='progress-outer'>
			<div class='progress-inner' style='width: {{25*progress}}%;'></div>
		</div>

		{{#if progress > 0}}
			<section style='left: 0;'>
				<div class='blob' intro='spring' outro='fade' style='background-color: rgb(0,0,150);'></div>
				<p intro='spring:{delay:400}' outro='fade'>batch of operations created</p>
			</section>
		{{/if}}

		{{#if progress > 1}}
			<section style='left: 33.3%;'>
				<div class='blob' intro='spring' outro='fade' style='background-color: rgb(150,0,0);'></div>
				<p intro='spring:{delay:400}' outro='fade'>viewmodel notified, dependants identified</p>
			</section>
		{{/if}}

		{{#if progress > 2}}
			<section style='left: 66.6%;'>
				<div class='blob' intro='spring' outro='fade' style='background-color: rgb(0,150,0);'></div>
				<p intro='spring:{delay:400}' outro='fade'>virtualdom members update, add selves to batch</p>
			</section>
		{{/if}}

		{{#if progress > 3}}
			<section style='left: 100%;'>
				<div class='blob' intro='spring' outro='fade' style='background-color: rgb(0,0,150);'></div>
				<p intro='spring:{delay:400}' outro='fade'>batch is flushed, DOM updates</p>
			</section>
		{{/if}}
	</div>
</div>

<style>
	.timeline-container {
		width: 100%;
		padding: 0 12em;
	}

	.timeline {
		width: 100%;
		height: 0;
		top: 50%;
	}

	section {
		position: absolute;
		width: 33.333%;
	}

	.blob {
		display: block;
		position: absolute;
		width: 1em;
		height: 1em;
		left: -0.5em;
		top: -0.5em;
		background-color: red;
		border-radius: 50%;
		border: #666;
	}

	p {
		text-align: center;
		transform: translate(-50%,0);
		padding: 1em;
	}

	.progress-outer {
		height: 2px;
	}

	.progress-inner {
		height: 100%;
		background-color: #666;
	}
</style>

<script>
	component.exports = {
		data: {
			progress: 0
		},

		oninit () {
			setTimeout( () => {
				this.animate( 'progress', 4, {
					duration: 800,
					easing: 'ease-in-out'
				});
			}, 800 );
		},

		transitions: {
			spring: require( '../../shared/spring' )
		}
	};
</script>